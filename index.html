<html>
<head>
<meta charset="utf-8">
<title>TAE JS 测试工具</title>
<style>
td {
	font-size: 12px;
	vertical-align: middle;
}
</style>
<script language="JavaScript">
window.addEventListener( 'load', function( evt ) {
	var requiredVer = '0.3';
	var checkExtVersion = function( ver ) {
		var a_req = requiredVer.split( '.' );
		var a_cur = ver.split( '.' );
		var i = 0;
		while ( i < a_req.length && i < a_cur.length ) {
			var v_req = parseInt( a_req[i] );
			var v_cur = parseInt( a_cur[i] );
			if ( v_cur < v_req ) return false;
			i ++;
		}
		return true;
	};

	var btnRun = document.getElementById( 'tae-js-testbed-run' );
	btnRun.addEventListener( 'click', function( evt ) {
		var ver = btnRun.getAttribute( 'data-ext-version' );
		if ( ver == null ) {
			alert( '请先安装最新版本的 tae-js-testbed.crx 插件。' );
			return;
		}

		if ( checkExtVersion( ver ) ) return;
		alert( '您现在安装的是 tae-js-testbed.crx 插件的 ' + ver + ' 版本。\r\n建议您重新安装最新的 ' + requiredVer + ' 版本，以确保功能正常。' );
	});
});
</script>
</head>
<body>

<table style="width:100%; height:100%;">
<tr>
	<td colspan="3">
		本工具仅适用于 Google Chrome 浏览器，使用之前，需要先下载安装 Chrome 插件。
		<br>
		安装方法：先 <a href="tae-js-testbed.crx">下载 tae-js-testbed.crx 文件</a> 到本地，再打开 Chrome 浏览器的“扩展程序”管理页面，然后把文件拖拽到那个页面里。
	</td>
</tr>
<tr>
	<td style="width:50%;">
		<table style="width:100%; height:100%;">
		<tr>
			<td>
				HTML:
			</td>
		</tr>
		<tr>
			<td style="height:40%;">
				<textarea id="tae-js-testbed-html" style="width:100%; height:100%;">
<div class="my-div">
	hello, TAE JS !
</div>
<hr>
<input type="button" value="迷你登录框" class="J_TB_Login" data-location="http://uzblog.uz.taobao.com/index.php">
<hr>
<div class="kg_editorContainer" data-config="{&amp;quot;width&amp;quot;:&amp;quot;733px&amp;quot;, &amp;quot;height&amp;quot;:&amp;quot;200px&amp;quot;}">
	<textarea name="my_html_editor" class="ks-editor-textarea" style="width:733px;height:200px;">在这里编辑&lt;/textarea>
</div>

<!-- r4000 版本的 js 环境需要配置 cajamodules -->
<cajamodules inlucde="kissy/1.3.0/core,kissy/gallery/kcharts/1.1/index" />
</textarea>
			</td>
		</tr>
		<tr>
			<td style="line-height:28px;">
				<button id="tae-js-testbed-run" style="float:right">运行&gt;&gt;</button>
				<div style="float:right; margin-right:30px;">
					JS环境版本
					<select id="tae-js-testbed-ver">
						<option value="r3002" selected>r3002</option>
						<option value="r4000">r4000</option>
					</select>
				</div>
				JavaScript:
			</td>
		</tr>
		<tr>
			<td style="height:60%;">
				<textarea id="tae-js-testbed-js" style="width:100%; height:100%;">
var div = KISSY.all('.my-div');
console.log('my-div:', div);
var text = div.text();
console.log('text:', text);
</textarea>
			</td>
		</tr>
		</table>
	</td>
	<td style="width:50%; height:100%;">
		<table style="width:100%; height:100%;">
		<tr>
			<td>
<!--
				<div style="float:right">
					<a href="mailto:lorrylockie@gmail.com?subject=%CC%E1%BD%BB%20TAE%20JS%20%B2%E2%CA%D4%D3%C3%C0%FD&body=HTML:%0D%0A%0D%0A%0D%0A%0D%0AJavaScript:%0D%0A%0D%0A">提交测试用例</a>
				</div>
-->
				运行结果:
			</td>
		</tr>
		<tr>
			<td style="height:100%;">
				<iframe id="tae-js-testbed-iframe" style="width:100%; height:100%;"></iframe>
			</td>
		</tr>
		</table>
	</td>
</tr>
</table>

</body>
</html>